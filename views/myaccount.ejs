<%# ADDING HEADER %>
<%- include("partials/header.ejs" , {pageTitle : "CollegeGeeks: :: My Account" , style: "css/style.css"}); -%>

<%# ADDING NAVBAR %>
<section class="title_myaccount">
    <%- include("partials/LoggedNavbar.ejs");  -%>
    <!-- <p>answers ::: <%=profile.answers%></p>
    <p>likedAnswers ::: <%=profile.likedAnswers%></p> -->
</section>

<body style="background-color:#f0f2f5;">
    
<%if(error.length>0){%>
        <div class="container mt-2">
        <div class=" alert alert-danger d-flex align-items-center" role="alert">
            <div>
                <i class="fas fa-exclamation-triangle"></i> <b><%= error %></b> 
            </div>
          </div>
        </div>
<%} else {%>
<section class="my_acc">
    <div class="container">
        <div class="row">
            <div class = "my_background rounded">
               <a href="/Editprofile" ><button class="edit_profile btn btn-sm btn-secondary" type="button">Edit Profile</button></a>
            </div>
            <div class="user_profile">
                <div class="profile_pic" >
                    <% if( profile.dp.length>0 && profile.dp !== "/images/user.png"){%> 
                <img
                src="<%=profile.dp%>" alt="Profile Pic" 
                class=" img-fluid" id="dp"/> 
                </div>
                <% }else{ %> 
                 <i class="user_icon fas fa-user-circle fa-10x"></i>
                 <% } %> 
            <div class=" upload">
                <form action='/profileDp' method="POST" id="jsform" enctype="multipart/form-data">
                <input type="file" name="profilePic" id="actual-btn" hidden required>
                <label for="actual-btn" id="from" style="cursor: pointer; color: black;"> <i class="fas fa-camera fa-2x"></i></label>
                </form>
            </div>
            </div>
            <div class="usename" style="text-transform: capitalize;">
                    <span class="display-6"><%=profile.name%></span>
                    <p><%=profile.intro%></p>
            </div>
        </div>
    </div>  
</section>

<section class="my_acc_body">
    <div class="container">
        <div class="row">
            <div class="col-xl-3 col-lg-3 col-md-3 col-6 mb-2">
                <div class="card">
                    <div class="card-body">
                    <div class ="card-title mt-1">
                        <h4 data-bs-toggle="modal" data-bs-target="#exampleModal1" data-bs-whatever="@mdo" style="cursor: pointer;"  id="showfollowing" data-bs-backdrop="static" data-bs-keyboard="false"> Following <i class="fas fa-angle-double-right"></i></h4>
                        <hr>
                    </div>
                      <h3> <span id ="following"> <%=profile.followings%> </span></h3>
                    </div>
                </div>
            </div>
            <div class="col-xl-3 col-lg-3 col-md-3 col-6 mb-2">
                <div class="card">
                    <div class="card-body">
                    <div class ="card-title mt-1">
                        <h4 data-bs-toggle="modal" data-bs-target="#exampleModal2"  style="cursor: pointer;" id="showfollowers" data-bs-backdrop="static" data-bs-keyboard="false">Followers <i class="fas fa-angle-double-right" ></i></h4>
                        <hr>
                    </div>
                      <h3> <span id ="followers"> <%=profile.followers%></span></h3>
                    </div>
                </div>
            </div>
            <div class="col-xl-3 col-lg-3 col-md-3 col-6 mb-2">
                <div class="card">
                    <div class="card-body">
                    <div class ="card-title mt-1">
                        <h4>Answered</h4>
                        <hr>
                    </div>
                      <h3> <span id ="answered"> <%=profile.answeredQuestions%> </span></h3>
                    </div>
                </div>
            </div>
            <div class="col-xl-3 col-lg-3 col-md-3 col-6 mb-2">
                <div class="card">
                    <div class="card-body">
                    <div class ="card-title mt-1">
                        <h4>Asked</h4>
                        <hr>
                    </div>
                      <h3> <span id ="asked"> <%=profile.questions%> </span></h3>
                    </div>
                </div>
            </div>
        </div>
    </div> 
</section>

<!-- modal -->
<div  class="modal fade" id="exampleModal1" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel"></h5>
          <button type="button" id="close_button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" id="modal_element" style="text-transform: capitalize;">
            <div id="following_name" class="list-group">
                
            </div>
        </div>
      </div>
    </div>
  </div>


  <div  class="modal fade" id="exampleModal2" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" data-bs-backdrop="static">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Followers</h5>
          <button id="close_button2" type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class=" modal-body" id="modal_element2" style="text-transform: capitalize;">
             <div id="followers_name" class="list-group">
                
            </div> 
        </div>
      </div>
    </div>
  </div>






 <section class="my_acc_body">
    <div class="container-sm">
        <div class="row">
            <div class="col-lg-6 col-md-6 col-12">
               <div class="card mb-4" style="height: 18rem;">
                   <div class="card-body">
                       <div class="card-title"><h4>INFO</h4></div><hr>
                       <div class="row gy-2 g-2">
                        <div class=" col-12 mb-3">
                            
                            <div class ="row">
                            <div class="col-4">
                                <b>Name :</b>
                            </div>
                            <div class="col-8">
                                <b style="text-transform: capitalize;"><%= profile.name%></b>
                            </div>
                            </div>
                        </div>
                        <hr>
                        <div class=" col-12 mb-3">
                            <div class ="row">
                            <div class="col-4">
                                <b>Email:</b>
                            </div>
                            <div class="col-8">
                               <b> <%= profile.email%></b>
                            </div>
                            </div>
                        </div>
                        <hr>
                        <div class=" col-12 mb-3">
                            <div class ="row">
                                <div class="col-4">
                                    <b>Stream:</b>
                                </div>
                                <div class="col-8">
                                    <% if(profile.branch === "CV"){ %>
                                        <b>Civil Engineering</b>
                                    <%}%>
                                    <% if(profile.branch === "CSE"){ %>
                                        <b>Computer Science or IT</b>
                                    <%}%>
                                    <% if(profile.branch === "ME"){ %>
                                        <b>Mechanical or Automobile Engineering </b>
                                    <%}%>
                                    <% if(profile.branch === "CE"){ %>
                                        <b>Chemical Engineering</b>
                                    <%}%>
                                    <% if(profile.branch === "CT"){ %>
                                        <b>Ceramic  Engineering</b>
                                    <%}%>
                                    <% if(profile.branch === "LT"){ %>
                                        <b>Leather Technology</b>
                                    <%}%>
                                    <% if(profile.branch === "FT"){ %>
                                        <b>Food Technology</b>
                                    <%}%>
                                    <% if(profile.branch === "ECE"){ %>
                                        <b>Electronics and telecommunication</b>
                                    <%}%>
                                    <% if(profile.branch === "EE"){ %>
                                        <b>Electrical Engineering</b>
                                    <%}%>
                                </div>
                             </div>
                        </div>
                        
                       </div>
                   </div>
               </div>
               </div>
               <div class="col-lg-6 col-md-6 col-12">
                <div class="card mb-4" style="width: 20rem;">
                    <div class="card-body">
                        <div class="card-title"><h4>INFO</h4></div><hr>
                        <canvas id="myChart"></canvas>
                        </div>
                    </div>
                </div>
                </div>
        </div>
    </div> 
</section>

<% } %> 

























<script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
      crossorigin="anonymous">
</script>
<script src="js/myaccount.js"></script>

</body>
</html>
